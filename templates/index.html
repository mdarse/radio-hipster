{% extends "layout.html" %}

{% block title 'Home' %}

{% block javascript %}
{{ parent() }}
<script src="{{ app.request.basepath }}/audiojs/audio.min.js"></script>
<script src="{{ app.request.basepath }}/js/lib/lodash.js"></script>
<script src="{{ app.request.basepath }}/js/lib/backbone.js"></script>
<script src="{{ app.request.basepath }}/js/app.js"></script>
{% endblock %}

{% block content %}
<div class="row-fluid">
    <div class="span12 span">
        <audio id="player"></audio>
    </div>
</div>
<div class="row-fluid">
    <section class="span8 span">
        <section id="search-view">
            <div class="search-form form-inline">
                <input type="search" id="search-field" placeholder="Search for songs, artists or albums" class="input-xlarge">
                <div class="btn-group" data-toggle="buttons-radio">
                    <button class="btn active search-in" data-search-in="song|artist|album">Any</button>
                    <button class="btn search-in" data-search-in="song">Title</button>
                    <button class="btn search-in" data-search-in="album">Album</button>
                    <button class="btn search-in" data-search-in="artist">Artist</button>
                </div>
            </div>
            <script type="text/x-underscore" id="search-result-template">
                <li data-id="<%= id %>">
                    <%= hightlight(name) %> /
                    <%= album ? hightlight(album) : "Album inconnu" %> /
                    <%= artist ? hightlight(artist) : "Artiste inconnu" %>
                    <button class="add btn btn-mini" type="button">Add to playlist</button>
                </li>
            </script>
            <ul id="search-results"></ul>
            <a href="#uploadModal" role="button" class="btn btn-large" data-toggle="modal">Upload a song</a>
            {{ include('uploadForm.twig', { form: upload_form }) }}
        </section>
        <aside>
            {{ include('top.html.twig') }}
        </aside>
    </section>
    <aside class="span4 span">
        <h1>Playlist</h1>
        <ol id='playlist'></ol>
    </aside>
</div>
{% endblock %}
